upstream roundrobin {
    server fastapi1:8000;
    server fastapi2:8000 weight=2;
    server fastapi3:8000;
}
server {
    listen 80;
    location / {
        proxy_pass http://roundrobin/;
    }
}