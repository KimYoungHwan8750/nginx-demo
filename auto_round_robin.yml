services:
  fastapi:
    build:
      context: .
      dockerfile: Dockerfile-fastapi
    networks:
      - nginx-network
  nginx:
    depends_on:
      - fastapi
    build:
      context: .
      dockerfile: auto_round_robbin
    ports:
      - "3336:80"
    networks:
      - nginx-network
networks:
  nginx-network:
    driver: bridge